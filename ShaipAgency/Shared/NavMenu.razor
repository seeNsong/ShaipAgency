@*<div class="top-row pl-4 navbar navbar-dark">
        <a class="navbar-brand" href="">ShaipAgency</a>
        <button class="navbar-toggler" @onclick="ToggleNavMenu">
            <span class="navbar-toggler-icon"></span>
        </button>
    </div>

    <div class="@NavMenuCssClass" @onclick="ToggleNavMenu">
        <ul class="nav flex-column">
            <li class="nav-item px-3">
                <NavLink class="nav-link" href="" Match="NavLinkMatch.All">
                    <span class="oi oi-home" aria-hidden="true"></span> Home
                </NavLink>
            </li>
            <li class="nav-item px-3">
                <NavLink class="nav-link" href="counter">
                    <span class="oi oi-plus" aria-hidden="true"></span> Counter
                </NavLink>
            </li>
            <li class="nav-item px-3">
                <NavLink class="nav-link" href="fetchdata">
                    <span class="oi oi-list-rich" aria-hidden="true"></span> Fetch data
                </NavLink>
            </li>
            <li class="nav-item px-3">
                <NavLink class="nav-link" href="TestComponent">
                    <span class="oi oi-list-rich" aria-hidden="true"></span> Test Component
                </NavLink>
            </li>
            <li class="nav-item px-3">
                <NavLink class="nav-link" href="Users">
                    <span class="oi oi-list-rich" aria-hidden="true"></span> Users
                </NavLink>
            </li>
        </ul>
    </div>

    @code {
        private bool collapseNavMenu = true;

        private string NavMenuCssClass => collapseNavMenu ? "collapse" : null;

        private void ToggleNavMenu()
        {
            collapseNavMenu = !collapseNavMenu;
        }
    }*@


<DxTreeView @ref="@treeView"
            CssClass="app-sidebar"
            ExpandButtonIconCssClass="demo-icon-expand"
            CollapseButtonIconCssClass="demo-icon-collapse"
            AllowSelectNodes="true"
            NodeExpandCollapseAction="TreeViewNodeExpandCollapseAction.NodeClick"
            BeforeExpand="@BeforeExpand"
            SelectionChanged="@SelectionChanged">
    <Nodes>
        <DxTreeViewNode Text="Home" NavigateUrl="">
        </DxTreeViewNode>
        <DxTreeViewNode Text="서비스소개" NavigateUrl="">
        </DxTreeViewNode>
        <DxTreeViewNode Text="서비스신청" NavigateUrl="">
        </DxTreeViewNode>
        <DxTreeViewNode Text="부가서비스" NavigateUrl="">
        </DxTreeViewNode>
        <DxTreeViewNode Text="테스트페이지">
            <Nodes>
                <DxTreeViewNode Text="Fetch Data" NavigateUrl="fetchdata"></DxTreeViewNode>
                <DxTreeViewNode Text="Test Component" NavigateUrl="TestComponent"></DxTreeViewNode>
                <DxTreeViewNode Text="User List" NavigateUrl="Test/Users"></DxTreeViewNode>
                <DxTreeViewNode Text="사용자리스트" NavigateUrl="Test/UsersSP"></DxTreeViewNode>
            </Nodes>
        </DxTreeViewNode>
        <DxTreeViewNode Text="Overview" NavigateUrl="/DevExpressDemo/Overview">
        </DxTreeViewNode>
        <DxTreeViewNode Text="Data Grid">
            <Nodes>
                <DxTreeViewNode Text="Column Types" NavigateUrl="GridColumnTypes"></DxTreeViewNode>
                <DxTreeViewNode Text="Sort Data" NavigateUrl="GridSortData"></DxTreeViewNode>
                <DxTreeViewNode Text="Grouping" NavigateUrl="GridGrouping"></DxTreeViewNode>
                <DxTreeViewNode Text="Filter Row" NavigateUrl="GridFilterRow"></DxTreeViewNode>
                <DxTreeViewNode Text="Selection" NavigateUrl="GridSelection"></DxTreeViewNode>
                <DxTreeViewNode Text="Templates" NavigateUrl="GridTemplate"></DxTreeViewNode>
                <DxTreeViewNode Text="Paging and Scrolling" NavigateUrl="GridPagingAndScrolling"></DxTreeViewNode>
                <DxTreeViewNode Text="Cascading Editors" NavigateUrl="GridCascadingEditors"></DxTreeViewNode>
                <DxTreeViewNode Text="Edit Form Validation" NavigateUrl="GridEditFormTemplateValidation"></DxTreeViewNode>
                <DxTreeViewNode Text="Remote Data Source" NavigateUrl="GridRemoteDataSource" />
                <DxTreeViewNode Text="Large Data Source" NavigateUrl="GridLargeDataBase" />
                <DxTreeViewNode Text="Master-Detail View" NavigateUrl="GridMasterDetail"></DxTreeViewNode>
                <DxTreeViewNode Text="HTML Decoration" NavigateUrl="GridHTMLDecoration"></DxTreeViewNode>
            </Nodes>
        </DxTreeViewNode>
        <DxTreeViewNode Text="Pivot Grid">
            <Nodes>
                <DxTreeViewNode Text="Overview" NavigateUrl="PivotGrid"></DxTreeViewNode>
                <DxTreeViewNode Text="Templates" NavigateUrl="PivotGridTemplates"></DxTreeViewNode>
                <DxTreeViewNode Text="Large Data Source" NavigateUrl="PivotGridLargeDataBase"></DxTreeViewNode>
                <DxTreeViewNode Text="Chart Integration" NavigateUrl="PivotGridChartIntegration"></DxTreeViewNode>
            </Nodes>
        </DxTreeViewNode>
        <DxTreeViewNode Text="Charts" BadgeText="Upd">
            <Nodes>
                <DxTreeViewNode Text="Series Types" NavigateUrl="ChartSeriesTypes"></DxTreeViewNode>
                <DxTreeViewNode Text="Dynamic Series" NavigateUrl="ChartDynamicSeries"></DxTreeViewNode>
                <DxTreeViewNode Text="Range Series" NavigateUrl="ChartRangeSeries"></DxTreeViewNode>
                <DxTreeViewNode Text="Financial Series" NavigateUrl="ChartFinancialSeries"></DxTreeViewNode>
                <DxTreeViewNode Text="Pie Series" NavigateUrl="ChartPieSeries"></DxTreeViewNode>
                <DxTreeViewNode Text="Axes" NavigateUrl="ChartAxes" BadgeText="Upd"></DxTreeViewNode>
                <DxTreeViewNode Text="Customization" NavigateUrl="ChartCustomization"></DxTreeViewNode>
                <DxTreeViewNode Text="Series Customization" NavigateUrl="ChartSeriesCustomization"></DxTreeViewNode>
            </Nodes>
        </DxTreeViewNode>
        <DxTreeViewNode Text="Scheduler">
            <Nodes>
                <DxTreeViewNode Text="View Types" NavigateUrl="SchedulerViewTypes"></DxTreeViewNode>
                <DxTreeViewNode Text="Recurring Appointments" NavigateUrl="SchedulerRecurringAppointments"></DxTreeViewNode>
            </Nodes>
        </DxTreeViewNode>
        <DxTreeViewNode Text="Data Editors">
            <Nodes>
                <DxTreeViewNode Text="Calendar" NavigateUrl="Calendar">
                </DxTreeViewNode>
                <DxTreeViewNode Text="CheckBox" NavigateUrl="CheckBox">
                </DxTreeViewNode>
                <DxTreeViewNode Text="ComboBox" NavigateUrl="ComboBox">
                </DxTreeViewNode>
                <DxTreeViewNode Text="Date Edit" NavigateUrl="DateEdit">
                </DxTreeViewNode>
                <DxTreeViewNode Text="List Box" NavigateUrl="ListBox">
                </DxTreeViewNode>
                <DxTreeViewNode Text="Spin Edit" NavigateUrl="SpinEdit">
                </DxTreeViewNode>
                <DxTreeViewNode Text="TagBox" NavigateUrl="TagBox">
                </DxTreeViewNode>
                <DxTreeViewNode Text="Text Box" NavigateUrl="TextBox">
                </DxTreeViewNode>
            </Nodes>
        </DxTreeViewNode>
        <DxTreeViewNode Text="Buttons">
            <Nodes>
                <DxTreeViewNode Text="Button" NavigateUrl="Button"></DxTreeViewNode>
            </Nodes>
        </DxTreeViewNode>
        <DxTreeViewNode Text="Navigation and Layout">
            <Nodes>
                <DxTreeViewNode Text="Form Layout" NavigateUrl="FormLayout">
                </DxTreeViewNode>
                <DxTreeViewNode Text="Pager" NavigateUrl="Pager">
                </DxTreeViewNode>
                <DxTreeViewNode Text="Popup" NavigateUrl="Popup">
                </DxTreeViewNode>
                <DxTreeViewNode Text="Tabs" NavigateUrl="Tabs">
                </DxTreeViewNode>
                <DxTreeViewNode Text="TreeView" NavigateUrl="TreeView">
                </DxTreeViewNode>
            </Nodes>
        </DxTreeViewNode>
        <DxTreeViewNode Text="File Management" BadgeText="New">
            <Nodes>
                <DxTreeViewNode Text="Upload" NavigateUrl="Upload" BadgeText="New"></DxTreeViewNode>
            </Nodes>
        </DxTreeViewNode>
        <DxTreeViewNode Text="Form Validation" NavigateUrl="FormValidation">
        </DxTreeViewNode>
    </Nodes>
</DxTreeView>

@code {
    DxTreeView treeView;

    protected void SelectionChanged(TreeViewNodeEventArgs e)
    {
        if (e.NodeInfo.IsLeaf)
        {
            var parentInfo = e.NodeInfo.Parent;
            if (parentInfo != null)
            {
                var parentSiblingNodesInfo = treeView.GetNodesInfo(n => !n.IsLeaf && n.Level == parentInfo.Level && !string.Equals(n.Text, parentInfo.Text));
                foreach (var nodeInfo in parentSiblingNodesInfo)
                    treeView.SetNodeExpanded(n => string.Equals(n.Text, nodeInfo.Text), false);
            }
            else
                treeView.CollapseAll();
        }
    }

    protected void BeforeExpand(TreeViewNodeCancelEventArgs e)
    {
        if (!e.CausedByAPI)
            treeView.CollapseAll();
    }
}